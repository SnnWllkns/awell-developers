---
title: onActivityCreated function
description: Define the logic of what needs to happen when your action is activated
---

The `onActivityCreated` function is called whenever orchestration or design (preview) activates a Custom Action. It will publish a message that is received by the extension server, which automatically finds the right Custom Action and calls the `onActivityCreated` function defined in that action.

<figure className="w-full flex flex-col justify-center text-center relative my-8">
  <div className="bg-white w-full mx-auto rounded-md dark:p-4 mx-auto">
    <a
      href="https://res.cloudinary.com/da7x4rzl4/image/upload/v1678709334/Developer%20portal/onActivityCreated.png"
      target="_blank"
      title="onActivityCreated"
    >
      <img
        src="https://res.cloudinary.com/da7x4rzl4/image/upload/v1678709334/Developer%20portal/onActivityCreated.png"
        alt="onActivityCreated"
      />
    </a>
  </div>
  <figcaption className="dark:text-slate-400 pt-4">
    How the `onActivityCreated` function is called.
  </figcaption>
</figure>

**The `onActivityCreated` function has a couple of parameters that will be useful when developing an extension:**

1. Payload: not only allows you to access the values of your extension settings and action fields but also access patient related data.
2. Callbacks: `onComplete` and `onError`

```javascript
export const myAction = {
    ...,
  onActivityCreated: async (payload, onComplete, onError) => {
    // Do something here
  },
}
```

## Payload

The payload allows you to access the values of your extension settings and action fields but also allows access to patient data.

```javascript
export const myAction = {
  onActivityCreated: async (payload) => {
    const {
      patient, // access patient profile data for patient enrolled in pathway the activity is related to
      fields, // access the values of your action fields
      settings, // access the values of your extension settings
    } = payload

    // Do something
  },
}
```

## Callbacks

Callbacks allow you to communicate with the Design (preview) or Orchestration engine and delegate back control to them. **An extension either needs to call `onComplete` or `onError` to complete the corresponding activity.**

<figure className="w-full flex flex-col justify-center text-center relative">
  <div className="bg-white w-full mx-auto rounded-md dark:p-4 mx-auto">
    <a
      href="https://res.cloudinary.com/da7x4rzl4/image/upload/v1678711700/Developer%20portal/onActivityCreatedWithCallbacks.png"
      target="_blank"
      title="onActivityCreated with callbacks"
    >
      <img
        src="https://res.cloudinary.com/da7x4rzl4/image/upload/v1678711700/Developer%20portal/onActivityCreatedWithCallbacks.png"
        alt="onActivityCreated with callbacks"
      />
    </a>
  </div>
</figure>

### onComplete

The `onComplete` callback can be called to acknowledge the activity is completed.

```javascript
export const myAction = {
  onActivityCreated: async (payload, onComplete) => {
    const {
      patient, // access patient profile data for patient enrolled in pathway the activity is related to
      fields, // access the values of your action fields
      settings, // access the values of your extension settings
    } = payload

    // Do something

    // Notify Awell that activity can be completed.
    await onComplete()
  },
}
```

### onError

The `onError` callback can be called to let Awell know something went wrong with running your extension code. However, the activity will still be completed.

```javascript
export const myAction = {
  onActivityCreated: async (payload, onComplete, onError) => {
    const {
      patient, // access patient profile data for patient enrolled in pathway the activity is related to
      fields, // access the values of your action fields
      settings, // access the values of your extension settings
    } = payload

    try {
        // Do something
    } catch {
        // Let Awell know that you couldn't complete the activity
        await onError(...)
    }

    // Notify Awell that activity can be completed.
    await onComplete()
  },
}
```
